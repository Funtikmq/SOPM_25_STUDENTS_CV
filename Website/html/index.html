<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>UnitBV Students</title>
    <link rel="stylesheet" href="../styles/styles.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <div class="mainContainer">
      <div class="innerContainer">
        <h1>UNITBV Students</h1>
        <div class="sliderContainer">
          <div class="cardsContainer">
            <a href="veaceslav.html" class="card active">
              <img
                class="cardImg"
                src="../img/veaceslav.jpg"
                alt="Primul student"
              />
              <h3 class="cardTitle">Bobeica Veaceslav</h3>
            </a>

            <a href="" class="card">
              <img class="cardImg" src="../img/2.jpg" alt="Al doilea student" />
              <h3 class="cardTitle">Atitienei Eliza</h3>
            </a>

            <a href="" class="card">
              <img
                class="cardImg"
                src="../img/3.jpg"
                alt="Al treilea student"
              />
              <h3 class="cardTitle">Andrieș Bogdan</h3>
            </a>
          </div>
          <!-- Indicator dots -->
          <div class="sliderDots"></div>
        </div>
      </div>
    </div>

    <script src="../scripts/slider.js"></script>
  </body>
</html>

<script>
  const cardsContainer = document.querySelector(".cardsContainer");
  const cards = document.querySelectorAll(".card");
  const dotsContainer = document.querySelector(".sliderDots");
  let currentIndex = 0;
  let startX = 0;
  let currentX = 0;
  let isDragging = false;

  // Crează dots indicators
  cards.forEach((_, index) => {
    const dot = document.createElement("div");
    dot.className = `dot ${index === 0 ? "active" : ""}`;
    dot.addEventListener("click", () => goToSlide(index));
    dotsContainer.appendChild(dot);
  });

  const dots = document.querySelectorAll(".dot");

  function goToSlide(index) {
    currentIndex = index;
    const cardWidth = cards[0].offsetWidth + 32; // width + gap
    cardsContainer.scrollLeft = cardWidth * index;
    updateDots();
  }

  function updateDots() {
    dots.forEach((dot, index) => {
      dot.classList.toggle("active", index === currentIndex);
    });
  }

  // Evenimente pentru mouse
  cardsContainer.addEventListener("mousedown", (e) => {
    isDragging = true;
    startX = e.pageX - cardsContainer.offsetLeft;
    cardsContainer.style.cursor = "grabbing";
    cardsContainer.style.scrollBehavior = "auto";
  });

  cardsContainer.addEventListener("mousemove", (e) => {
    if (!isDragging) return;
    e.preventDefault();
    currentX = e.pageX - cardsContainer.offsetLeft;
  });

  cardsContainer.addEventListener("mouseup", () => {
    if (!isDragging) return;
    isDragging = false;
    cardsContainer.style.cursor = "grab";
    cardsContainer.style.scrollBehavior = "smooth";

    const cardWidth = cards[0].offsetWidth + 32;
    const dragDistance = startX - currentX;

    // Schimbă slide-ul doar dacă s-a făcut o glisare semnificativă
    if (Math.abs(dragDistance) > 50) {
      if (dragDistance > 0 && currentIndex < cards.length - 1) {
        currentIndex++;
      } else if (dragDistance < 0 && currentIndex > 0) {
        currentIndex--;
      }
      goToSlide(currentIndex);
    }
  });

  cardsContainer.addEventListener("mouseleave", () => {
    isDragging = false;
    cardsContainer.style.cursor = "grab";
  });

  // Evenimente pentru touch
  cardsContainer.addEventListener("touchstart", (e) => {
    isDragging = true;
    startX = e.touches[0].pageX - cardsContainer.offsetLeft;
    cardsContainer.style.scrollBehavior = "auto";
  });

  cardsContainer.addEventListener("touchmove", (e) => {
    if (!isDragging) return;
    currentX = e.touches[0].pageX - cardsContainer.offsetLeft;
  });

  cardsContainer.addEventListener("touchend", () => {
    if (!isDragging) return;
    isDragging = false;
    cardsContainer.style.scrollBehavior = "smooth";

    const cardWidth = cards[0].offsetWidth + 32;
    const dragDistance = startX - currentX;

    if (Math.abs(dragDistance) > 50) {
      if (dragDistance > 0 && currentIndex < cards.length - 1) {
        currentIndex++;
      } else if (dragDistance < 0 && currentIndex > 0) {
        currentIndex--;
      }
      goToSlide(currentIndex);
    }
  });

  // Auto-scroll la primul card la încărcare
  window.addEventListener("load", () => {
    goToSlide(0);
  });
</script>
